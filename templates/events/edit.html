{% extends "base.html" %}
{% block content %}
<div class="form-card">
  <h2>Edit Event</h2>

  {% if event.image_filename %}
  <div class="form-group">
    <label>Current event image:</label>
    <img src="{{ url_for('uploaded_file', filename=event.image_filename) }}"
         alt="Current image for {{ event.title }}"
         style="max-width: 100%; max-height: 250px; border-radius: 8px; margin-top: 0.5rem;">
  </div>
  {% endif %}

  <form action="{{ url_for('event_bp.edit_event', event_id=event.event_id) }}"
        method="POST"
        enctype="multipart/form-data">

    <div class="form-group">
      <label for="edit-title">Title</label>
      <input id="edit-title" type="text" name="title"
             value="{{ event.title }}" required>
    </div>

    <div class="form-group">
      <label for="edit-datetime">Date & Time</label>
      <input id="edit-datetime" type="datetime-local" name="date_of_event"
             value="{{ event.date_of_event }}" required>
    </div>

    <div class="form-group">
      <label for="edit-category">Event Category</label>
      <select id="edit-category" name="category" required>
        {% for c in [
          "Academic Event", "Activism", "Basic Needs Support",
          "Career & Professional Development", "Civic Engagement",
          "Community Event", "Crafts & Creative Activities",
          "Cultural", "Food Resources / Food Events",
          "Health & Wellness", "Internship & Career Exploration",
          "Research Opportunities", "Social", "Student Life",
          "Workshops & Training", "Other"
        ] %}
          <option value="{{ c }}" {% if event.category == c %}selected{% endif %}>
            {{ c }}
          </option>
        {% endfor %}
      </select>
    </div>

    <div class="form-group">
      <label for="edit-contact">Contact Info</label>
      <input id="edit-contact" type="text" name="contact_info"
             value="{{ event.contact_info }}">
    </div>

    <div class="form-group">
      <label for="edit-description">Description</label>
      <textarea id="edit-description" name="description" rows="4">{{ event.description }}</textarea>
    </div>

    <!-- Replace image -->
    <div class="form-group">
      <label for="image">Replace Event Spam (optional)</label>
      <input type="file" name="image" id="image" accept="image/*">
    </div>

    <!-- Location -->
    <div class="form-group">
      <label>Location</label>

      <input type="text" name="address1"
             placeholder="Address 1"
             value="{{ event.address1 }}">

      <input style="margin-top:8px;" type="text" name="address2"
             placeholder="Address 2"
             value="{{ event.address2 }}">

      <input style="margin-top:8px;" type="text" name="city"
             placeholder="City"
             value="{{ event.city }}">

      <input style="margin-top:8px;" type="text" name="state"
             placeholder="State"
             maxlength="2"
             value="{{ event.state }}">

      <input style="margin-top:8px;" type="text" name="postal_code"
             placeholder="Postal Code"
             value="{{ event.postal_code }}">
    </div>

    <button class="submit-btn" type="submit">Save Changes</button>
  </form>

  <a class="back-link" href="{{ url_for('event_bp.list_events') }}">Back to Events</a>
</div>
{% endblock %}
