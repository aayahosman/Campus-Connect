{% extends "base.html" %}
{% block content %}
<div class="form-card">
  <h2>Edit Event</h2>

  {% if event.image_filename %}
  <div class="form-group">
    <label>Current event image:</label>
    <img src="{{ url_for('uploaded_file', filename=event.image_filename) }}"
         alt="Current image for {{ event.title }}"
         style="max-width: 100%; max-height: 250px; border-radius: 8px; margin-top: 0.5rem;">
  </div>
  {% endif %}

  <form action="{{ url_for('event_bp.edit_event', event_id=event.event_id) }}"
      method="POST"
      enctype="multipart/form-data">

    <div class="form-group">
      <label>Title:</label>
      <input type="text" name="title" value="{{ event.title }}" required>
    </div>

    <div class="form-group">
      <label>Date & Time:</label>
      <input type="datetime-local" name="date_of_event" value="{{ event.date_of_event }}" required>
    </div>

    <div class="form-group">
      <label>Event Category:</label>
      <select name="category" class="form-control" required>
        <option value="" disabled>Select an event category</option>

        <option value="Academic Event"
                {% if event.category == "Academic Event" %}selected{% endif %}>
          Academic Event
        </option>
        <option value="Activism"
                {% if event.category == "Activism" %}selected{% endif %}>
          Activism
        </option>
        <option value="Basic Needs Support"
                {% if event.category == "Basic Needs Support" %}selected{% endif %}>
          Basic Needs Support
        </option>
        <option value="Career & Professional Development"
                {% if event.category == "Career & Professional Development" %}selected{% endif %}>
          Career & Professional Development
        </option>
        <option value="Civic Engagement"
                {% if event.category == "Civic Engagement" %}selected{% endif %}>
          Civic Engagement
        </option>
        <option value="Community Event"
                {% if event.category == "Community Event" %}selected{% endif %}>
          Community Event
        </option>
        <option value="Crafts & Creative Activities"
                {% if event.category == "Crafts & Creative Activities" %}selected{% endif %}>
          Crafts & Creative Activities
        </option>
        <option value="Cultural"
                {% if event.category == "Cultural" %}selected{% endif %}>
          Cultural
        </option>
        <option value="Food Resources / Food Events"
                {% if event.category == "Food Resources / Food Events" %}selected{% endif %}>
          Food Resources / Food Events
        </option>
        <option value="Health & Wellness"
                {% if event.category == "Health & Wellness" %}selected{% endif %}>
          Health & Wellness
        </option>
        <option value="Internship & Career Exploration"
                {% if event.category == "Internship & Career Exploration" %}selected{% endif %}>
          Internship & Career Exploration
        </option>
        <option value="Research Opportunities"
                {% if event.category == "Research Opportunities" %}selected{% endif %}>
          Research Opportunities
        </option>
        <option value="Social"
                {% if event.category == "Social" %}selected{% endif %}>
          Social
        </option>
        <option value="Student Life"
                {% if event.category == "Student Life" %}selected{% endif %}>
          Student Life
        </option>
        <option value="Workshops & Training"
                {% if event.category == "Workshops & Training" %}selected{% endif %}>
          Workshops & Training
        </option>
        <option value="Other"
                {% if event.category == "Other" %}selected{% endif %}>
          Other
        </option>
      </select>
    </div>


    <div class="form-group">
      <label>Contact Info:</label>
      <input type="text" name="contact_info" value="{{ event.contact_info }}">
    </div>

    <div class="form-group">
      <label>Description:</label>
      <textarea name="description" rows="4">{{ event.description }}</textarea>
    </div>

    <div class="form-group">
      <label>Replace Event Spam (optional):</label>
      <input type="file" name="image" accept="image/*">
    </div>

    <div class="form-group">
      <label>Location:</label>
      <input type="text" name="address1" placeholder="Address 1" value="{{ event.address1 }}">
      <input style="margin-top:8px;" type="text" name="address2" placeholder="Address 2" value="{{ event.address2 }}">
      <input style="margin-top:8px;" type="text" name="city" placeholder="City" value="{{ event.city }}">
      <input style="margin-top:8px;" type="text" name="state" placeholder="State" maxlength="2" value="{{ event.state }}">
      <input style="margin-top:8px;" type="text" name="postal_code" placeholder="Postal Code" value="{{ event.postal_code }}">
    </div>

    <button class="submit-btn" type="submit">Save Changes</button>

  </form>

  <a class="back-link" href="{{ url_for('event_bp.list_events') }}">Back to Events</a>
</div>
{% endblock %}
