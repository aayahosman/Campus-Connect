<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>{{ page_title or "Campus Connect" }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script defer>
      document.addEventListener("DOMContentLoaded", () => {
          const root = document.documentElement;
          const button = document.getElementById("theme-toggle");

          if (!button) return; // prevents crash

          // Load saved mode
          if (localStorage.getItem("theme") === "dark") {
              root.classList.add("dark");
              button.textContent = "‚òÄÔ∏è";
          }

          button.addEventListener("click", () => {
              root.classList.toggle("dark");

              if (root.classList.contains("dark")) {
                  localStorage.setItem("theme", "dark");
                  button.textContent = "‚òÄÔ∏è";
              } else {
                  localStorage.setItem("theme", "light");
                  button.textContent = "üåô";
              }
          });
      });
    </script>


  </head>
  <body>
    <header>
      <h1>Campus Connect</h1>
      <nav>
        <a href="{{ url_for('index') }}">Home</a> |
        <a href="{{ url_for('about') }}">About</a> |
        <a href="{{ url_for('resources.list_resources') }}">Resources</a> |
        <a href="{{ url_for('services.list_services') }}">Services</a> |
        <a href="{{ url_for('event_bp.list_events') }}">Events</a>
        {% if session.get('user_id') %}
        <a href="{{ url_for('auth.logout') }}">Logout</a>
        {% endif %}
        <button
        id="theme-toggle"
        class="theme-btn"
        aria-label="Toggle dark mode"
        >
        üåô
        </button>

      </nav>
    </header>
    <main>
      {% with messages = get_flashed_messages(with_categories=True) %}
        {% if messages %}
          <div class="flash-container">
            {% for category, msg in messages %}
              <div class="flash flash-{{ category }}">
                {{ msg }}
              </div>
            {% endfor %}
          </div>
        {% endif %}
      {% endwith %}
    
      {% block content %}{% endblock %}
    </main>
    <footer>
      <p>&copy; 2025 Campus Connect</p>
    </footer>
  </body>
</html>
